# Конфигуратор

В зависимости от настроек, конфигуратор можно открыть с помощью вкладки в верхней части экрана или через сэндвич-меню.

![Открыть компоновщик конфигурации](../images/ConfBuild_Open.png)

Конфигуратор (Конф) - это вкладка, на которой можно подключать и отключать модули программы. Ячейки с левой стороны (A) позволяют выбрать, какими модулями программы вы будете пользоваться, ячейки справа (C) позволяют представить эти модули в виде вкладок (E) в AndroidAPS. Если правая ячейка не активирована, доступ к функциям можно получить из выпадающего меню (D) в левом верхнем углу экрана.

Там, где в пределах модуля доступны дополнительные параметры, можно нажать на шестеренку (B), которая их откроет.

**Первая конфигурация:** Начиная с версии 2.0 AAPS процесс настройки AndroidAPS контролируется Мастером установки. Для его запуска нажмите на меню под тремя точками в правом верхнем углу экрана меню (F) и выберите «Мастер установки».

![Опции конфигуратора и шестеренка настроек](../images/ConfBuild_ConfigBuilder.png)

## Вкладка или сэндвич-меню

С помощью переключателя под значком глаза вы можете решить, как открыть соответствующий раздел программы.

![Вкладка или сэндвич-меню](../images/ConfBuild_TabOrHH.png)

## Профиль

Выберите нужный базальной профиль См. страницу [Профили](../Usage/Profiles.md) для дополнительной информации.

### Локальный профиль (рекомендуется)

Локальный профиль использует базальной профиль, введенный вручную в телефоне. Как только он выбран, появляется новая вкладка, где можно при необходимости изменить данные профиля, считываемые с помпы. При следующем переключении профиля они записываются на помпу в профиль 1. Мы рекомендуем этот профиль, поскольку он не зависит от интернет-соединения.

Ваши локальные профили являются частью [экспортируемых настроек](../Usage/ExportImportSettings.rst). Поэтому убедитесь, что у вас есть резервная копия в безопасном месте.

![Параметры локального профиля](../images/LocalProfile_Settings.png)

Кнопки:

* зеленый плюс: добавить
* красный крестик: удалить
* синяя стрелка: дублировать

Если вы вносите изменения в профиль, убедитесь, что редактируете правильный профиль. На вкладке профиля не всегда отображается фактически используемый профиль, например, если вы переключили профиль, используя вкладку профиля на домашней странице, то он может отличаться от профиля, который показан на вкладке, так как между ними нет синхронизации.

#### Переключение профиля и клонирование

Вы можете легко создать новый локальный профиль с помощью переключения профиля. В этом случае сдвиг по времени и процент будет применяться к новому локальному профилю.

1. Перейдите на вкладку терапии.
2. Выберите Переключатель профилей.
3. Нажмите Кнопку "Клонировать".
4. Вы можете редактировать новый локальный профиль через вкладку локальный профиль (ЛП) или через сэндвич-меню.

![Переключение профиля и клонирование](../images/LocalProfile_ClonePS.png)

Если вы хотите переключаться с профиля Nightscout на локальный профиль просто сделайте переключение профиля в профиле NS и клонируйте его, как описано выше.

#### Загрузить локальные профили в Nightscout

Локальные профили также могут быть загружены на Nightscout. The settings can be found in [NSClient preferences](../Configuration/Preferences#nsclient).

![Загрузить локальный профиль в НС](../images/LocalProfile_UploadNS2.png)

Преимущества:

* не требуется подключение к интернету для изменения настроек профиля
* изменения профиля могут быть сделаны непосредственно на телефоне
* новый профиль можно создать при помощи переключателя профиля
* локальные профили можно загрузить в Nightscout

Недостатки:

* отсутствуют

### Помощник профиля

Помощник профиля предлагает две функции:

1. Найти профиль для детей
2. Сравнить два профиля или переключателя профиля, чтобы клонировать новый профиль

Подробности разъясняются на отдельной [странице помощника профиля](../Configuration/profilehelper.rst).

### профиль NS

Профиль NS использует профили, которые вы сохранили на сайте Nightscout (https://[адрес вашего сайта]/profile). Можно использовать [Переключатель профиля](../Usage/Profiles.md) для изменения активного профиля, это действие запишет профиль в помпу на случай неполадок с AndroidAPS. Это позволяет вам легко создавать несколько профилей в Nightscout (например работа, дом, спорт, отдых и т. п.). Вскоре после нажатия кнопки «Сохранить» они будут переданы в AAPS если ваш смартфон подключен к интернету. Даже без подключения к Интернету или без подключения к Nightscout профили Nightscout доступны в AAPS после синхронизации.

Выберите действие [Смена профиля ](../Getting-Started/Screenshots.md#current-profile), чтобы активировать профиль из Nightscout. При этом AAPS запишет выбранный профиль в помпу, так что выбранный профиль будет действовать даже в случае недоступности AAPS.

Преимущества:

* множественные профили
* легко редактировать с помощью ПК или планшета

Недостатки:

* невозможность локальных изменений в настройках профиля
* профиль не может быть изменен непосредственно на телефоне

## Инсулин

![Insulin type](../images/ConfBuild_Insulin.png)

* Выберите кривую, соответствующую типу вашего инсулина.
* Варианты 'Быстро действующий Oref', Сверхбыстрый Oref' и 'Безпиковый Oref' имеют вид экспоненты. Подробная информация приведена в [документации по OpenAPS](https://openaps.readthedocs.io/en/latest/docs/While%20You%20Wait%20For%20Gear/understanding-insulin-on-board-calculations.html#understanding-the-new-iob-curves-based-on-exponential-activity-curves). 
* Кривые зависят от DIA и времени до пика.
    
    * ФИОЛЕТОВАЯ кривая показывает, сколько **инсулина осталось** после введения - его количество снижается с течением времени.
    * Синяя линия показывает ** активность инсулина**.

### DIA (время действия инсулина)

* Длительность работы инсулина не одинакова для всех. Вот почему вы должны проверить ее на себе. 
* Но она всегда должна быть минимум 5 часов.
* Многие люди, использующие ультра-короткие инсулины вроде Fiasp, отмечают что его действие спустя 3-4 часа практически незаметно, даже если остается еще порядка 0.0xx единиц. Однако, это остаточное количество инсулина может быть ощутимо, например, во время занятий спортом. Поэтому в AndroidAPS время действия инсулина DIA указывается минимум 5 часов.
* Более подробную информацию можно прочитать в разделе "Профиль инсулина" на [ этой ](../Getting-Started/Screenshots#insulin-profile) странице. 

### Различия типов инсулина

* Для 'Коротких', 'Ультракоротких' и 'Lyumjev' инсулинов время действия DIA - единственный параметр, который можно изменить, время пика фиксировано. 
* Безпиковый позволяет настроить как DIA, так и время пика, эта опция для опытных пользователей, которые знают последствия таких параметров. 
* [Диаграмма профиля инсулина](../Getting-Started/Screenshots#insulin-profile) поможет понять различия. 
* Эту диаграмму можно вывести на отдельной вкладке, включив соответствующий флажок в конфигураторе, ее также можно найти в выпадающем сэндвич-меню.

#### Быстро действующий Oref

* рекомендуется для Humalog, Novolog и Novorapid
* DIA (длительность действия инсулина) = по крайней мере 5.0 часов
* Макс. пик = 75 мин после инъекции (фиксированный, не регулируется)

#### Сверхбыстрый Oref

* Рекомендуется для FIASP
* DIA (длительность действия инсулина) = по крайней мере 5.0 часов
* Макс. пик = 55 мин после инъекции (фиксированный, не регулируется)

#### Lyumjev

* Специальный профиль для инсулина Lyumjev
* DIA (длительность действия инсулина) = по крайней мере 5.0 часов
* Макс. пик = 45 мин после инъекции (фиксированный, не регулируется)

#### Безпиковый Oref

* Для профиля 'Безпиковый 0ref' можно самостоятельно ввести время пика.
* Если в профиле не определено более высокое значение, DIA автоматически устанавливается на 5 часов.
* Этот профиль рекомендуется если используется неподдерживаемый тип инсулина или смесь различных инсулинов.

## Источник данных гликемии

Выберите источник данных ГК - см. страничку [Источник ГК](BG-Source.rst) для получения дополнительной информации по настройкам.

* [xDrip +](https://xdrip-plus-updates.appspot.com/stable/xdrip-plus-latest.apk)
* ГК с клиента Nightscout
* [MM640g](https://github.com/pazaan/600SeriesAndroidUploader/releases)
* [ Glimp ](https://play.google.com/store/apps/details?id=it.ct.glicemia&hl=de)-поддерживается только версия 4.15.57 и более поздние
* Модифицированное приложение [Dexcom](https://github.com/dexcomapp/dexcomapp/) - выберите «Отправлять данные ГК на xDrip +», если хотите пользоваться оповещениями от xDrip +.
    
    ![Config Builder BG source](../images/ConfBuild_BGSource.png)

* [Poctech](https://www.poctechcorp.com/en/contents/268/5682.html)

* [ПриложениеTomato](http://tomato.cool/) для устройства MiaoMiao
* Генерировать случайные данные ГК (только демо-режим)

## Помпа

Выберите помпу, которой пользуетесь.

* [Dana R](DanaR-Insulin-Pump.md)
* DanaR Корея (DanaR для корейского рынка)
* Dana Rv2 (помпа DanaR с неофициальным обновлением прошивки)
* [Dana RS](DanaRS-Insulin-Pump.md)
* [Accu Chek Insight](Accu-Chek-Insight-Pump.md)
* [Accu Chek Combo](Accu-Chek-Combo-Pump.md) (требуется установка утилиты ruffy для сопряжения с помпой)
* [Medtronic](MedtronicPump.md)
* MDI инъекции инсулина шприцем/шприц-ручкой (на основе предложений от AAPS по ведению терапии)
* Виртуальная помпа (открытый цикл для помпы, не имеющей драйверов - только предложения)

Для помпы Dana перейдите в **Дополнительные параметры**, и если необходимо, активируйте BT watchdog. Он отключает bluetooth на одну секунду, если подключение к помпе невозможно. Это помогает на некоторых телефонах, где зависает bluetooth.

[Пароль для помпы Dana RS](../Configuration/DanaRS-Insulin-Pump.md) должен быть введен правильно. Пароль не проверялся в предыдущих версиях.

## Определение чувствительности

Выберите тип анализа чувствительности. Для получения более подробной информации о различных типах [читайте здесь](../Configuration/Sensitivity-detection-and-COB.md). Алгоритм будет анализировать историю данных и вносить коррективы, если признает, что вы реагируете более чутко (или, наоборот, более резистентно) на инсулин, чем обычно. Подробнее об алгоритме чувствительности можно прочитать в [документации OpenAPS](https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autosens.html).

Вы можете вывести график чувствительности на экран, отметив галочкой соответствующий пункт из выпадающего меню графиков. Он изображается в виде белой линии. Обратите внимание, что для использования Определителя чувствительности [Autosens](../Usage/Open-APS-features#autosens) необходимо пройти [ Цель 8 ](../Usage/Objectives#objective-8-adjust-basals-and-ratios-if-needed-and-then-enable-autosens). До достижения этой цели процент / линия Autosens на диаграмме отображается только для информации.

### Настройки усваиваемости

Если вы применяете Oref1 с микроболюсами SMB необходимо установить **min_5m_действия углеводов** на 8. Это значение используется только во время пробелов в мониторинге или когда физическая нагрузка "съедает" весь подъем гликемии, которая в ином случае заставила бы алгоритм AAPS компенсировать углеводы COB организма. В случаях, когда [поглощение углеводов](../Usage/COB-calculation.rst) не может быть рассчитано динамически на основе реакции вашей крови, он применяет скорость усвоения по умолчанию. Этот параметр не приводит к отказам.

## Система ИПЖ

Выберите нужный алгоритм APS для ведения терапии. Подробности выбранного алгоритма можно просмотреть на вкладке OpenAPS(OAPS).

* Помощник болюса OpenAPS AMA (расширенный помощник болюса, состояние алгоритма на 2017г.) Подробнее об OpenAPS AMA в [документации OpenAPS](https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autosens.html#advanced-meal-assist-or-ama). Говоря просто, преимущества этого алгоритма в более эффективной постановке временного базала ПРИ УСЛОВИИ правильного введения углеводов.
* [Супер микро болюс OpenAPS](../Usage/Open-APS-features.md) (самый новый алгоритм для опытных пользователей). Для того, чтобы использовать этот алгоритм, вы должны начать [Цель 10](../Usage/Objectives#objective-10-enabling-additional-oref1-features-for-daytime-use-such-as-super-micro-bolus-smb), а параметр min_5m_carbimpact должен быть равен 8 (см. настройки в Конфигуратор > определение чувствительности > Чувствительность Oref1).

## Замкнутый цикл

* Переключение между Открытым циклом, Закрытым циклом и Приостановкой помпы на низкой ГК.

![Config builder - loop mode](../images/ConfigBuilder_LoopLGS.png)

### Открытый цикл

* AAPS постоянно оценивает все доступные данные (активный инсулин IOB, активные углеводы COB, сахар крови и т. п.) и при необходимости делает предложения о корректировке терапии. 
* Предложения не будут выполняться автоматически (как при замкнутом цикле) а должны вводиться вручную прямо в помпу или с помощью команды (при пользовании совместимыми помпами Dana R/RS или Accu Chek Combo). 
* Этот параметр предназначен для знакомства с работой AndroidAPS или для неподдерживаемых помп.

### Closed Loop/Замкнутый цикл (петля, контур)

* AAPS постоянно оценивает доступные данные (активный инсулин IOB, активные углеводы COB, сахар крови и т. п.) и при необходимости автоматически корректирует лечение (без вашего дальнейшего вмешательства) для достижения целевого диапазона или величины (подача болюса, временная базальная скорость, отключение подачи инсулина во избежание гипогликемии и т.д.). 
* Замкнутый цикл работает в рамках многочисленных ограничений безопасности, каждое из которых можно задать по отдельности.
* Замкнутый цикл можно инициировать только по достижении [цели 6](../Usage/Objectives#objective-6-starting-to-close-the-loop-with-low-glucose-suspend) или далее с применением поддерживаемой помпы.
* Обратите внимание: в режиме Замкнутого цикла рекомендуется использовать строгое значение целевой ГК вместо диапазона значений (например, 5,5 ммоль/л или 100 мг/дл вместо 5,0 - 7,0 ммоль/л или 90 - 125 мг/дл).

### Приостановка помпы на низкой ГК

* maxIOB установлен в 0
* Это означает, что если глюкоза крови падает система уменьшит базу.
* Если значение глюкозы крови растет - автоматической коррекции не будет. База останется на том же уровне, что записан в выбранном Профиле.
* Только если базовый IOB отрицательный (от предыдущего отключения при низкой ГК) будет подан дополнительный инсулин для снижения ГК.

### Минимальный запрос на изменения

* При открытогм цикле вы будете получать уведомления каждый раз, когда AAPS рекомендует скорректировать базальную скорость. 
* Чтобы уменьшить число уведомлений, можно либо использовать более широкий диапазон целевой ГК, либо увеличить процент минимального запроса на изменения.
* Он определяет относительное изменение, необходимое для активации уведомления.

## Цели (обучающая программа)

AndroidAPS содержит обучающую программу с рядом задач (целей), которые вы должны выполнить шаг за шагом. Подобная организация алгоритма безопасно проведет вас к созданию замкнутой системы. Она гарантирует, что вы все правильно наладили и понимаете, что именно делает система. Это единственный способ понять, что вы можете доверять системе.

Следует [экспортировать настройки](../Usage/ExportImportSettings.rst) (в том числе ход прохождения целей) на регулярной основе. В дальнейшем, если вам потребуется заменить смартфон (новая покупка, повреждение и т. д.) вы можете просто импортировать эти параметры.

См. страницу [Цели](../Usage/Objectives.rst) для дополнительной информации.

## Терапия

На вкладке лечения (терапия, назначения) отражены назначения, загруженные из nightscout. Если вы хотите редактировать или удалить запись (например, съели меньше углеводов, чем ожидали) выберите «Удалить» и введите новое значение (измените время, в случае необходимости) через [ кнопку углеводы на главном экране](../Getting-Started/Screenshots#carb-correction).

## Общие настройки

### Общие замечания

Отображает текущее состояние цикла и кнопки для наиболее распространенных действий (см. [раздел Домашний экран](../Getting-Started/Screenshots.md) для подробной информации). Доступ к параметрам - через значок шестеренки.

#### Не отключать экран

Параметр «не отключать экран» заставит Android держать экран включенным постоянно. Это полезно для презентаций и т. д. Но опция потребляет больше энергии аккумулятора. Поэтому рекомендуется подключить смартфон к кабелю зарядного устройства.

#### Buttons

Определите, какие кнопки отображаются на домашнем экране.

* Терапия
* Калькулятор
* Инсулин
* Углеводы
* CGM (opens xDrip+)
* Калибровка

Кроме того можно задать сочетания клавиш для приращения инсулина и углеводов и определить, должны ли диалоговые окна содержать примечания.

#### Быстрый болюс - настройки

Создайте кнопки для некоторых стандартных блюд (углеводы и метод вычисления болюса) которые будут отображаться на главном экране. Применяйте для стандартных часто употребляемых блюд. Если для различных блюд указано разное время, у вас всегда будет оответствующая кнопка приема пищи на домашнем экране, в зависимости от времени суток.

Примечание: Кнопка не будет видна вне диапазона времени, для нее созданного или если у вас есть достаточно активного инсулина IOB на углеводы, заданные кнопкой.

![QuickWizard button](../images/ConfBuild_QuickWizard.png)

#### Временные цели по умолчанию

Выберите временные цели по умолчанию (длительность и целевые значения ГК). По умолчанию установлены следующие значения:

* ожидаемый прием пищи: цель 72 мг/дл или 4,0 ммоль/л, продолжительность 45 минут
* нагрузка: цель 140 мг/дл или 7,8 ммоль/л, продолжительность 90 минут
* гипо: цель 125 мг/дл или 6,9 ммоль/л, продолжительность 45 минут

#### Заполнить стандартное количество инсулина

Укажите значения по уполчанию для прайм заполнения катетера помпы, в зависимости от его типа и длины. 

#### Диапазон для визуализации

Укажите значения для высоких и низких значений ГК для отображения в AndroidAPS и на умных часах. Это используется только для отображения, и не является целевыми значениями ГК. Например: 70 - 180 мг/дл или 3,9 - 10 ммоль/л

#### сокращенные имена табул

Выберите каким образом будут отображаться заголовки вкладок в AndroidAPS: полностью (НАЧАЛО, ДЕЙСТВИЯ, MEDTRONIC, ЗАМКНУТЫЙ ЦИКЛ и т.п.) или сокращенно (НАЧАЛО, ДЕЙСТВ, MDT, ЗЦ и т.п.)

#### Показать поле примечаний в диалогах терапии

Укажите, хотите ли, чтобы при вводе команд отображалось поле для заметок.

#### Индикаторы состояния

Выберите, хотите ли вы, чтобы на обзорном экране присутствовали [индикаторы состояния](../Configuration/Preferences#status-lights) такие как возраста катетера, возраст инсулина, возраст сенсора, возраст батареи, уровень резервуара или уровень заряда батареи. При достижении уровня предупреждения цвет светового сигнала состояния переключится на желтый. Критический возраст будет показан красным цветом.

#### Расширенные настройки

**Подать часть инсулина, предложенного мастером болюса**: При пользовании алгоритмом микроболюсов SMB многие не колют все 100% сразу, а дают, например, 75% и позволяют алгоритму SMB самостоятельно справляться с остальным. При такой настройке можно выбрать процентное значение по умолчанию, с которым должен работать мастер болюса. Если этот параметр составляет 75%, а требуемое конечное количество инсулина 10 ед., то мастер болюса предложит только 7,5 единиц.

**Включить функции суперболюса в калькуляторе болюса** (Суперболюс отличается от *супер микро болюсов SMB *!): Применяйте с осторожностью и не включайте, пока не узнаете, в чем принцип его работы. В общем виде база следующих двух часов добавляется к болюсу и при этом активируется нулевой временный базал. **Другие функции алгоритма AAPS будут отключены - поэтому применяйте с осторожностью! Если вы используете алгоритм супер микро болюса SMB, то время его работы будет определяться настройками ["Макс. ограничение SMB (минут)"](../Usage/Open-APS-features#max-minutes-of-basal-to-limit-smb-to); если вы не пользуетесь SMB, то алгоритм AAPS просто будет отключен на два часа.** Подробности о супер-болюсе можно найти [здесь](https://www.diabetesnet.com/diabetes-technology/blue-skying/super-bolus).

### Действия

* Кнопки быстрого доступа к распространенным настройкам.
* Подробнее см на [снимках экрана AAPS](../Getting-Started/Screenshots#action-tab).

### Автоматизация

Пользовательские задачи автоматизации ('если-тогда-иначе'). [читайте здесь](../Usage/Automation.rst).

### СМС-коммуникатор

Позволяет удалено управлять некоторыми функциями AndroidAPS при помощи SMS, см. [SMS команды](../Children/SMS-Commands.rst) для дополнительной информации по настройке.

### Еда

Отображает характеристики еды из базы данных Nightscout, см [Nightscout Readme](https://github.com/nightscout/cgm-remote-monitor#food-custom-foods) для дополнительной информации по настройкам.

Примечание: Записи не могут использоваться в калькуляторе AndroidAPS. (Только для просмотра)

### Смарт-часы Wear

Мониторим и контролируем AAPS, при помощи смарт-часов Android Wear (см. [страницу Циферблаты](../Configuration/Watchfaces.md)). Настройте параметры (шестеренка) для определения переменных, которые следует учитывать при расчете болюсов (т.е. тренд 15 мин, активные углеводы COB и т.п....).

Если вы хотите подавать болюс и т. д. с часов, тогда в настройках часов Wear следует включить «Управление с часов».

![Wear settings](../images/ConfBuild_Wear.png)

При помощи вкладки Wear или многослойного сэндвич-меню (в левой верхней части экрана, если вкладка не отображается) вы можете

* Повторить отправку всех данных. Может быть полезно, если некоторое время часы не были подключены и вы хотите передать на них данные.
* Открыть настройки на часах прямо с телефона.

### Cтрока состояния xDrip (часы)

Отображение информации о состоянии цикла на циферблате xDrip + (если вы не пользуетесь циферблатом AAPS /[AAPSv2 ](../Configuration/Watchfaces.md))

### клиент NS

* Настройка синхронизации данных AndroidAPS с Nightscout.
* Настройки в [параметрах](../Configuration/Preferences#nsclient) можно открыть, нажав на значок шестеренки.

### Тех. обслуживание

Адрес электронной почты и количество журналов/логов для отправки. Обычно не требует изменений.

### Конфигуратор

Используйте вкладку конфигуратора вместо выпадающего сэндвич-меню слева.